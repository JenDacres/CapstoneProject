<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Change Password</title>
  <link rel="stylesheet" href="trainer.css" />
</head>

<body>
  <div class="trainer-container">
    <h2>Change Password</h2>

    <form id="change-password-form">
        <div class="form-group">
            <label for="current-password">Current Password:</label>
            <input type="password" id="current-password" name="current-password" required />
          </div>
          
          <div class="form-group">
            <label for="new-password">New Password:</label>
            <input type="password" id="new-password" name="new-password" required />
          </div>
          
          <div class="form-group">
            <label for="confirm-new-password">Confirm New Password:</label>
            <input type="password" id="confirm-new-password" name="confirm-new-password" required />
          </div>          

      <div class="form-actions">
        <button type="submit" id="submit-btn">Submit</button>
        <button type="button" onclick="window.location.href='trainer.html'">Back to Dashboard</button>
      </div>
    </form>

    <p id="status-message" class="status-message"></p>
  </div>

  <script>
    document.getElementById('change-password-form').addEventListener('submit', function (e) {
      e.preventDefault();

      const currentPassword = document.getElementById('current-password').value;
      const newPassword = document.getElementById('new-password').value;
      const confirmNewPassword = document.getElementById('confirm-new-password').value;
      const statusMessage = document.getElementById('status-message');

      // Basic Validation
      if (newPassword !== confirmNewPassword) {
        statusMessage.textContent = "New passwords don't match.";
        statusMessage.style.color = 'red';
        return;
      }

      // Check for at least 1 uppercase letter, 1 symbol, and minimum length
      const passwordStrengthRegex = /^(?=.*[A-Z])(?=.*[!@#$%^&*(),.?":{}|<>]).{8,}$/;

      if (!passwordStrengthRegex.test(newPassword)) {
        statusMessage.textContent = "New password must be at least 8 characters long, with at least one uppercase letter and one symbol.";
        statusMessage.style.color = 'red';
        return;
      }

      // Simulate a success message (for now, without actual backend interaction)
      statusMessage.textContent = "Password changed successfully!";
      statusMessage.style.color = 'green';

      // You can replace this with actual API calls if you need to send data to a backend
      // fetch('/change-password', {
      //   method: 'POST',
      //   headers: {
      //     'Content-Type': 'application/json',
      //   },
      //   body: JSON.stringify({ currentPassword, newPassword }),
      // })
      // .then(response => response.json())
      // .then(data => {
      //   if (data.success) {
      //     statusMessage.textContent = "Password changed successfully!";
      //     statusMessage.style.color = 'green';
      //   } else {
      //     statusMessage.textContent = "Error: " + data.message;
      //     statusMessage.style.color = 'red';
      //   }
      // })
      // .catch(error => {
      //   statusMessage.textContent = "Error: Unable to change password.";
      //   statusMessage.style.color = 'red';
      // });
    });
  </script>
</body>
</html>
